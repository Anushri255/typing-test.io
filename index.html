<!DOCTYPE html>
<html lang="en">
<head>
    <title>Typing Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #f0f0f0;
        }

        .banner {
            width: 100%;
            background-color: #2196F3;
            color: white;
            padding: 20px;
            text-align: center;
            font-size: 24px;
            font-weight: bold;
            position: fixed;
            top: 0;
            left: 0;
            z-index: 1;
        }

        .container {
            text-align: center;
            background-color: #fff;
            border: 1px solid #ddd;
            max-width: 600px;
            width: 100%;
            margin-top: 30px;
        }

        #user-input {
            width: 500px;
            height: 100px;
            font-size: 16px;
            margin-top: 10px;
            padding: 10px;
        }

        button {
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            margin-top: 20px;
        }

        button:hover {
            background-color: #45a049;
        }

        #results {
            margin-top: 20px;
        }

        #results p {
            font-size: 18px;
            margin: 5px 0;
        }

        #results span {
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="banner">Typing Test</div>
    <h4>Copy the text shown below into the box!</h4>

    <div class="container">
        <p id="text-to-type">Here is a sample text to type.</p>
        <textarea id="user-input" placeholder="Start typing here..."></textarea>
        <div id="results">
            <p>Speed: <span id="speed">0</span> Words Per Min</p>
            <p>Accuracy: <span id="accuracy">0</span>%</p>
        </div>
    </div>
    <script>
        var textToTypeElement = document.getElementById('text-to-type');
        var userInputElement = document.getElementById('user-input');
        var speedElement = document.getElementById('speed');
        var accuracyElement = document.getElementById('accuracy');

        var phrases = [
            'The quick brown fox jumps over the lazy dog.',
            'Hello, is this your first day at school?',
            'I am typing a sentence to test my typing speed.',
            'The sun rises in the east and sets in the west.',
            'Practice makes perfect. Keep typing!',
            'Hackclub is amazing, wish I knew about it earlier'
        ];

        var startTime;

        function getRandomPhrase() {
            var randomIndex = Math.floor(Math.random() * phrases.length);
            return phrases[randomIndex];
        }

        function calculateSpeed(startTime, endTime, textLength) {
            var timeTaken = (endTime - startTime) / 60000; // minutes
            var wordsTyped = textLength / 5; // Approximate words
            return Math.round(wordsTyped / timeTaken);
        }

        function calculateAccuracy(inputText, originalText) {
            var inputWords = inputText.split(' ');
            var originalWords = originalText.split(' ');
            var correctWords = 0;
            for (var i = 0; i < inputWords.length; i++) {
                if (inputWords[i] === originalWords[i]) {
                    correctWords++;
                }
            }
            return Math.round((correctWords / originalWords.length) * 100);
        }

        function startTypingTest() {
            textToTypeElement.textContent = getRandomPhrase();
            userInputElement.value = '';
            userInputElement.focus();
            startTime = new Date();
        }

        userInputElement.addEventListener('input', function() {
            var originalText = textToTypeElement.textContent;
            var userText = userInputElement.value;

            if (userText === originalText) {
                var endTime = new Date();
                var speed = calculateSpeed(startTime, endTime, userText.length);
                var accuracy = calculateAccuracy(userText, originalText);
                speedElement.textContent = speed;
                accuracyElement.textContent = accuracy;
                alert('Test complete!');
                startTypingTest();
            }
        });

        window.onload = startTypingTest;
    </script>
</body>
</html>
