<!DOCTYPE html>
<html lang="en">
<head>
    <title>Typing Practice</title>
    <style>
        body {
            font-family: 'Verdana', sans-serif;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #e0f7fa;
        }

        .header {
            width: 100%;
            background-color: #00796b;
            color: #ffffff;
            padding: 15px;
            text-align: center;
            font-size: 22px;
            font-weight: 700;
            position: fixed;
            top: 0;
            left: 0;
            z-index: 1000;
        }

        .content {
            text-align: center;
            background-color: #ffffff;
            border: 2px solid #b2dfdb;
            max-width: 500px;
            width: 100%;
            margin-top: 70px; /* Adjusted for the header */
            padding: 15px;
            border-radius: 8px;
        }

        #input-box {
            width: 100%;
            height: 90px;
            font-size: 15px;
            margin-top: 10px;
            padding: 10px;
            border: 1px solid #b2dfdb;
            border-radius: 5px;
        }

        .action-button {
            padding: 12px 25px;
            background-color: #00796b;
            color: white;
            border: none;
            margin-top: 15px;
            border-radius: 5px;
            cursor: pointer;
        }

        .action-button:hover {
            background-color: #004d40;
        }

        #results-section {
            margin-top: 15px;
        }

        #results-section p {
            font-size: 16px;
            margin: 4px 0;
        }

        #results-section span {
            font-weight: bold;
        }

        #countdown {
            font-size: 16px;
            margin: 8px 0;
        }
    </style>
</head>
<body>
    <div class="header">Typing Practice Challenge</div>
    <h4>Type the text below as quickly as you can!</h4>

    <div class="content">
        <p id="text-display">Hereâ€™s a sample sentence for you to type.</p>
        <textarea id="input-box" placeholder="Begin typing here..."></textarea>
        <p id="countdown">Elapsed Time: <span id="countdown-display">0:00</span></p>
        <div id="results-section">
            <p>Previous Results:</p>
            <p>Words Per Minute: <span id="words-per-minute">0</span></p>
            <p>Typing Accuracy: <span id="accuracy-rate">0</span>%</p>
        </div>
        <button class="action-button" id="start-test-button">Start Test</button>
    </div>
    <script>
        var textDisplay = document.getElementById('text-display');
        var inputBox = document.getElementById('input-box');
        var wordsPerMinuteDisplay = document.getElementById('words-per-minute');
        var accuracyRateDisplay = document.getElementById('accuracy-rate');
        var countdownDisplay = document.getElementById('countdown-display');
        var startTestButton = document.getElementById('start-test-button');

        var sampleTexts = [
            'A fast brown fox jumps over the sleepy dog.',
            'Greetings! Is this your first school day?',
            'Typing practice helps improve your speed and accuracy.',
            'Keep practicing to perfect your typing skills!',
            'Hackclub is fantastic; wish I had discovered it sooner.'
        ];

        var testStartTime;
        var countdownInterval;

        function getRandomText() {
            var index = Math.floor(Math.random() * sampleTexts.length);
            return sampleTexts[index];
        }

        function calculateWPM(startTime, endTime, textLength) {
            var minutesElapsed = (endTime - startTime) / 60000;
            var wordCount = textLength / 5; // Approximate word count
            return Math.round(wordCount / minutesElapsed);
        }

        function computeAccuracy(userText, correctText) {
            var userWords = userText.trim().split(' ');
            var correctWords = correctText.trim().split(' ');
            var matchCount = 0;
            for (var i = 0; i < Math.min(userWords.length, correctWords.length); i++) {
                if (userWords[i] === correctWords[i]) {
                    matchCount++;
                }
            }
            return Math.round((matchCount / correctWords.length) * 100);
        }

        function initiateTypingTest() {
            textDisplay.textContent = getRandomText();
            inputBox.value = '';
            inputBox.focus();
            testStartTime = new Date();
            countdownDisplay.textContent = '0:00';
            clearInterval(countdownInterval);
            countdownInterval = setInterval(updateCountdown, 1000);
        }

        function updateCountdown() {
            var currentTime = new Date();
            var elapsed = Math.floor((currentTime - testStartTime) / 1000);
            var minutes = Math.floor(elapsed / 60);
            var seconds = elapsed % 60;
            countdownDisplay.textContent = minutes + ':' + (seconds < 10 ? '0' : '') + seconds;
        }

        inputBox.addEventListener('input', function() {
            var correctText = textDisplay.textContent;
            var userText = inputBox.value;

            if (userText.trim() === correctText.trim()) {
                var endTime = new Date();
                var wpm = calculateWPM(testStartTime, endTime, userText.length);
                var accuracy = computeAccuracy(userText, correctText);
                wordsPerMinuteDisplay.textContent = wpm;
                accuracyRateDisplay.textContent = accuracy;
                clearInterval(countdownInterval);
                alert('Typing test completed!');
                initiateTypingTest();
            }
        });

        startTestButton.addEventListener('click', function() {
            initiateTypingTest();
        });
    </script>
</body>
</html>
